---
import { getCollection } from 'astro:content';
import MainGridLayout from '@layouts/MainGridLayout.astro';
import AboutMe from '@components/about/AboutMe.astro';
import ESGTimeline from '@components/esg/ESGTimeline.tsx';
import Section from '@components/common/Section.astro';
import AboutMarkdownRenderer from '@components/about/AboutMarkdownRenderer.astro';

const esgEntries = await getCollection('esg');

const timelineData = esgEntries.map(item => ({
  id: item.slug,
  description: item.body,
  ...item.data,
}));

// 데이터를 원하는 순서(연도 내림차순)로 정렬
timelineData.sort((a, b) => {
  if (a.year !== b.year) {
    return b.year.localeCompare(a.year);
  }
  return a.id.localeCompare(b.id);
});

const pageTitle = "About | Jin mini";
const pageDescription = "ESG AI 전문가이자 풀스택 개발자, 김진의 소개 페이지입니다. 환경, 사회, 지배구조(ESG) 영역에서의 전문성과 AI 기술을 결합하여 지속가능한 솔루션을 만듭니다.";
---

<MainGridLayout title={pageTitle} description={pageDescription}>
  <Section>
    <AboutMe />
    <AboutMarkdownRenderer>
      <ESGTimeline client:load data={timelineData} />
    </AboutMarkdownRenderer>
  </Section>
</MainGridLayout>


